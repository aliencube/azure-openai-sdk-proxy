# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: azure-openai-sdk-proxy

services:  
  app:
    language: dotnet
    project: ./src/AzureOpenAIProxy.AppHost/AzureOpenAIProxy.AppHost.csproj
    host: containerapp

hooks:
  preprovision:
    shell: pwsh
    continueOnError: false
    interactive: false
    run: |
      $rg = "rg-$env:AZURE_ENV_NAME"
      $provisioned = az deployment group create -n aoai -g $rg --template-file ./biceps/aoai.bicep --parameters environmentName=$env:AZURE_ENV_NAME | ConvertTo-Json

      # Update appsettings.Development.json

  postprovision:
    shell: pwsh
    continueOnError: false
    interactive: false
    run: |
      # Add tables to table storage
